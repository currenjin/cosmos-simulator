<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>COSMOS ATLAS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Sans+KR:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-glow glow-a"></div>
    <div class="bg-glow glow-b"></div>
    <header class="hero">
      <div class="brand-lockup">
        <div class="brand-mark" aria-hidden="true">
          <img src="assets/cosmos-atlas-logo.svg" alt="" />
        </div>
        <div>
          <p class="eyebrow">COSMOS ATLAS</p>
          <h1>우주를 체험하는 관측 시뮬레이션 스튜디오</h1>
        </div>
      </div>
      <p class="hero-copy">
        실제 하늘 시뮬레이터와 물리 법칙 랩으로 우주를 직접 체험하고 학습합니다.
      </p>
      <div class="brand-settings">
        <label for="language-select" data-i18n="settings.language">언어</label>
        <select id="language-select">
          <option value="ko">한국어</option>
          <option value="en">English</option>
        </select>
        <label for="unit-select" data-i18n="settings.unit">단위</label>
        <select id="unit-select">
          <option value="astro">천문 단위</option>
          <option value="imperial">마일 혼합</option>
        </select>
      </div>
      <div class="mode-tabs" role="tablist" aria-label="앱 모드 선택">
        <button type="button" class="mode-tab is-active" data-tab="simulator" role="tab" aria-selected="true" data-i18n="tab.simulator">
          3D 시뮬레이터
        </button>
        <button type="button" class="mode-tab" data-tab="kepler" role="tab" aria-selected="false" data-i18n="tab.kepler">
          Kepler Lab
        </button>
        <button type="button" class="mode-tab" data-tab="dynamics" role="tab" aria-selected="false" data-i18n="tab.dynamics">
          Dynamics Lab
        </button>
      </div>
    </header>

    <main id="planner-view" hidden></main>

    <section id="simulator-view" class="simulator-view" hidden>
      <div class="sim-toolbar">
        <div>
          <h2 data-i18n="sim.title">3D 하늘 시뮬레이터</h2>
          <p data-i18n="sim.subtitle">드래그로 회전, 휠로 확대/축소. 별자리와 천체 레이어를 제어하세요.</p>
        </div>
        <div class="viewer-quick">
          <button type="button" data-focus="orion" data-i18n="sim.focusOrion">오리온</button>
          <button type="button" data-focus="ursa-major" data-i18n="sim.focusUrsa">북두칠성</button>
          <button type="button" data-focus="summer" data-i18n="sim.focusSummer">여름 삼각형</button>
        </div>
      </div>
      <div class="sim-controls viewer-controls">
        <label class="toggle">
          <input type="checkbox" id="toggle-constellations" checked />
          <span data-i18n="sim.constellations">별자리 선</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-nebulae" checked />
          <span data-i18n="sim.messier">천체(Messier)</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-planets" checked />
          <span data-i18n="sim.planets">행성</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-labels" checked />
          <span data-i18n="sim.labels">이름 라벨</span>
        </label>
        <label class="sim-time">
          <span data-i18n="sim.time">시간</span>
          <input type="time" id="sky-time" step="60" />
        </label>
        <label class="sim-time">
          <span data-i18n="sim.speed">배속</span>
          <select id="sky-speed">
            <option value="1">x1</option>
            <option value="10">x10</option>
            <option value="60">x60</option>
          </select>
        </label>
        <label class="sim-time">
          <span data-i18n="sim.date">날짜</span>
          <input id="date" type="date" required />
        </label>
        <label class="sim-time">
          <span data-i18n="sim.latitude">위도</span>
          <input id="latitude" type="number" min="-90" max="90" step="0.0001" required />
        </label>
        <label class="sim-time">
          <span data-i18n="sim.longitude">경도</span>
          <input id="longitude" type="number" min="-180" max="180" step="0.0001" required />
        </label>
        <label class="toggle">
          <input type="checkbox" id="sky-live-time" checked />
          <span data-i18n="sim.live">현재 시간 실시간</span>
        </label>
        <div class="sim-search">
          <label for="sky-search" data-i18n="sim.search">천체 찾기</label>
          <input id="sky-search" type="search" list="sky-search-list" placeholder="Orion / M42 / Vega" />
          <datalist id="sky-search-list"></datalist>
          <button type="button" id="sky-search-btn" data-i18n="sim.searchBtn">찾기</button>
        </div>
        <button type="button" id="sync-sky-now" data-i18n="sim.sync">현재 위치/시간 맞추기</button>
      </div>
      <p id="sky-status" class="sky-status"></p>
      <div id="sky-viewer"></div>
    </section>

    <section id="journey-view" class="journey-view" hidden></section>

    <section id="kepler-view" class="kepler-view" hidden>
      <div class="kepler-hero">
        <h2 data-i18n="kepler.title">케플러 법칙 학습 시뮬레이터</h2>
        <p data-i18n="kepler.subtitle">현상을 보고 법칙을 이해한 뒤, 뉴턴 연결과 실제 행성 데이터로 검증합니다.</p>
        <div class="lab-hero-actions">
          <button type="button" id="kepler-tutorial-open" class="ghost-button" data-i18n="kepler.tutorialStart">튜토리얼 시작</button>
        </div>
      </div>

      <section class="kepler-grid">
        <article class="kepler-panel">
          <h3 data-i18n="kepler.l1">1) 케플러 1법칙</h3>
          <label for="kepler-e" data-i18n="kepler.e">이심률 e</label>
          <input id="kepler-e" type="range" min="0" max="0.85" step="0.01" value="0.45" />
          <div class="kepler-metrics">
            <p><span data-i18n="kepler.focusDistance">초점 거리 c</span> <strong id="kepler-c"></strong></p>
            <p><span data-i18n="kepler.peri">근일점 q</span> <strong id="kepler-peri"></strong></p>
            <p><span data-i18n="kepler.aphe">원일점 Q</span> <strong id="kepler-aphe"></strong></p>
          </div>
          <p id="kepler-l1-check" class="kepler-note"></p>
        </article>

        <article class="kepler-panel">
          <h3 data-i18n="kepler.p2l">2) 현상 -> 2법칙</h3>
          <ol class="kepler-steps">
            <li data-i18n="kepler.step1">근일점에서 더 빨라지고 원일점에서 느려집니다.</li>
            <li data-i18n="kepler.step2">같은 시간 동안 쓸어가는 면적이 거의 같아집니다.</li>
            <li data-i18n="kepler.step3">이 현상을 케플러 2법칙(면적 속도 일정)으로 설명합니다.</li>
          </ol>
        </article>

        <article class="kepler-panel">
          <h3 data-i18n="kepler.k3">3) 케플러 3법칙</h3>
          <label for="kepler-a" data-i18n="kepler.a">반장축 a (AU)</label>
          <input id="kepler-a" type="range" min="0.4" max="30" step="0.1" value="1" />
          <div class="kepler-metrics">
            <p><span data-i18n="kepler.period">주기 T</span> <strong id="kepler-period"></strong></p>
            <p><span>T²</span> <strong id="kepler-t2"></strong></p>
            <p><span>a³</span> <strong id="kepler-a3"></strong></p>
          </div>
          <p id="kepler-law-check" class="kepler-note"></p>
        </article>

        <article class="kepler-panel kepler-visual">
          <canvas id="kepler-canvas" width="820" height="420"></canvas>
        </article>

        <article class="kepler-panel">
          <h3 data-i18n="kepler.newton">5) 뉴턴 연결</h3>
          <p data-i18n="kepler.newtonDesc">현재 거리 r에서 중력은 F = GMm/r²로 계산되며, r이 작을수록 힘이 커집니다.</p>
          <p><span data-i18n="kepler.currentR">현재 r</span> <strong id="kepler-r"></strong></p>
          <p><span data-i18n="kepler.force">지구 대비 힘</span> <strong id="kepler-force"></strong></p>
        </article>

        <article class="kepler-panel">
          <h3 data-i18n="kepler.data">6) 실제 데이터 비교</h3>
          <label for="kepler-planet" data-i18n="kepler.selectPlanet">행성 선택</label>
          <select id="kepler-planet"></select>
          <table class="kepler-table">
            <tbody>
              <tr><th>a (AU)</th><td id="planet-a"></td></tr>
              <tr><th data-i18n="kepler.realT">실측 T</th><td id="planet-real-t"></td></tr>
              <tr><th data-i18n="kepler.theoryT">이론 T(3법칙)</th><td id="planet-theory-t"></td></tr>
              <tr><th data-i18n="kepler.error">오차</th><td id="planet-error"></td></tr>
            </tbody>
          </table>
        </article>
      </section>
    </section>

    <section id="dynamics-view" class="dynamics-view" hidden>
      <div class="dynamics-hero">
        <h2 data-i18n="dyn.title">Dynamics Lab: 뉴턴 + 보존법칙</h2>
        <p data-i18n="dyn.subtitle">뉴턴 3법칙, 에너지 보존, 각운동량 보존을 하나의 상호작용으로 학습합니다.</p>
        <div class="lab-hero-actions">
          <button type="button" id="dyn-tutorial-open" class="ghost-button" data-i18n="dyn.tutorialStart">튜토리얼 시작</button>
        </div>
      </div>

      <section class="dynamics-grid">
        <article class="dynamics-panel">
          <h3 data-i18n="dyn.n123">1) 뉴턴 운동 3법칙</h3>
          <label for="dyn-mass" data-i18n="dyn.mass">질량 m</label>
          <input id="dyn-mass" type="range" min="0.5" max="8" step="0.1" value="2" />
          <label for="dyn-force" data-i18n="dyn.forceInput">추력 F</label>
          <input id="dyn-force" type="range" min="0" max="24" step="0.5" value="8" />
          <div class="dynamics-actions">
            <button type="button" id="dyn-thrust-btn" data-i18n="dyn.applyForce">추력 1초 적용</button>
            <button type="button" id="dyn-reset-btn" data-i18n="dyn.reset">리셋</button>
          </div>
          <div class="dynamics-metrics">
            <p><span data-i18n="dyn.acc">가속도 a</span> <strong id="dyn-acc"></strong></p>
            <p><span data-i18n="dyn.vel">속도 v</span> <strong id="dyn-vel"></strong></p>
            <p><span data-i18n="dyn.reaction">작용-반작용</span> <strong id="dyn-reaction"></strong></p>
          </div>
          <canvas id="dyn-thrust-canvas" width="620" height="240"></canvas>
        </article>

        <article class="dynamics-panel dynamics-orbit-panel">
          <h3 data-i18n="dyn.conservation">2) 에너지/각운동량 보존</h3>
          <p class="dynamics-note" data-i18n="dyn.conservationDesc">중력장 궤도에서 총 에너지 E와 각운동량 L이 거의 일정하게 유지되는지 확인하세요.</p>
          <canvas id="dyn-orbit-canvas" width="860" height="420"></canvas>
          <div class="dynamics-metrics two-col">
            <p><span>K</span> <strong id="dyn-k"></strong></p>
            <p><span>U</span> <strong id="dyn-u"></strong></p>
            <p><span>E = K + U</span> <strong id="dyn-e"></strong></p>
            <p><span>L</span> <strong id="dyn-l"></strong></p>
            <p><span data-i18n="dyn.eDrift">E 변동</span> <strong id="dyn-e-drift"></strong></p>
            <p><span data-i18n="dyn.lDrift">L 변동</span> <strong id="dyn-l-drift"></strong></p>
          </div>
        </article>
      </section>
    </section>

    <footer class="site-footer">
      <p>COSMOS ATLAS | Observe. Understand. Feel The Scale.</p>
    </footer>
    <script type="module" src="settings.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="sky3d.js"></script>
    <script type="module" src="kepler-lab.js"></script>
    <script type="module" src="dynamics-lab.js"></script>
  </body>
</html>
