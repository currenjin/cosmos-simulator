<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tonight Sky Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Sans+KR:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-glow glow-a"></div>
    <div class="bg-glow glow-b"></div>
    <header class="hero">
      <p class="eyebrow">Night Observation Assistant</p>
      <h1>오늘 밤 관측 플래너</h1>
      <p>
        위치와 날짜를 넣으면, 오늘 밤 실제로 보기 쉬운 천체를 우선순위로 추천합니다.
      </p>
      <div class="mode-tabs" role="tablist" aria-label="앱 모드 선택">
        <button type="button" class="mode-tab is-active" data-tab="planner" role="tab" aria-selected="true">
          플래너
        </button>
        <button type="button" class="mode-tab" data-tab="simulator" role="tab" aria-selected="false">
          3D 시뮬레이터
        </button>
        <button type="button" class="mode-tab" data-tab="journey" role="tab" aria-selected="false">
          코스믹 저니
        </button>
      </div>
    </header>

    <main id="planner-view">
      <section class="panel controls">
        <h2>관측 조건</h2>
        <form id="planner-form">
          <label>
            위도
            <input id="latitude" type="number" min="-90" max="90" step="0.0001" required />
          </label>
          <label>
            경도
            <input id="longitude" type="number" min="-180" max="180" step="0.0001" required />
          </label>
          <label>
            날짜
            <input id="date" type="date" required />
          </label>
          <label>
            장비
            <select id="equipment">
              <option value="naked-eye">맨눈</option>
              <option value="binocular" selected>쌍안경</option>
              <option value="small-scope">소형 망원경</option>
            </select>
          </label>
          <div class="buttons">
            <button type="button" id="use-location">내 위치 사용</button>
            <button type="submit" class="primary">추천 계산</button>
          </div>
        </form>
        <p class="hint">
          기준: 태양 고도 -12° 이하(어두운 하늘), 대상 고도 25° 이상일 때 관측 가능으로 판단.
        </p>
      </section>

      <section class="panel summary" id="summary"></section>

      <section class="panel results">
        <div class="results-head">
          <h2>추천 대상</h2>
          <span id="result-count"></span>
        </div>
        <div id="result-cards" class="cards"></div>
      </section>
    </main>

    <template id="card-template">
      <article class="card">
        <div class="card-head">
          <div>
            <h3 class="target-name"></h3>
            <p class="target-meta"></p>
          </div>
          <div class="score-chip"></div>
        </div>
        <div class="stats"></div>
        <div class="chart-wrap">
          <canvas width="320" height="120"></canvas>
        </div>
      </article>
    </template>

    <section id="simulator-view" class="simulator-view" hidden>
      <div class="sim-toolbar">
        <div>
          <h2>3D 하늘 시뮬레이터</h2>
          <p>드래그로 회전, 휠로 확대/축소. 별자리와 천체 레이어를 제어하세요.</p>
        </div>
        <div class="viewer-quick">
          <button type="button" data-focus="orion">오리온</button>
          <button type="button" data-focus="ursa-major">북두칠성</button>
          <button type="button" data-focus="summer">여름 삼각형</button>
        </div>
      </div>
      <div class="sim-controls viewer-controls">
        <label class="toggle">
          <input type="checkbox" id="toggle-constellations" checked />
          별자리 선
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-nebulae" checked />
          천체(Messier)
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-labels" checked />
          이름 라벨
        </label>
        <label class="sim-time">
          시간
          <input type="time" id="sky-time" step="60" />
        </label>
        <label class="toggle">
          <input type="checkbox" id="sky-live-time" checked />
          현재 시간 실시간
        </label>
        <button type="button" id="sync-sky-now">현재 위치/시간 맞추기</button>
      </div>
      <p id="sky-status" class="sky-status"></p>
      <div id="sky-viewer"></div>
    </section>

    <section id="journey-view" class="journey-view" hidden>
      <div class="journey-hero">
        <p class="journey-kicker">Cosmic Perspective</p>
        <h2>우주의 위대함을 체감하는 코스믹 저니</h2>
        <p>
          지구에서 출발해 관측 가능한 우주까지 스케일을 확장해보세요. 슬라이더를 움직이면 거리와 빛의 시간이
          함께 변합니다.
        </p>
      </div>

      <section class="journey-grid">
        <article class="journey-panel stage-panel">
          <div class="stage-header">
            <h3>우주 스케일 시뮬레이터</h3>
            <button type="button" id="journey-autoplay">자동 항해 시작</button>
          </div>
          <label class="stage-slider-label" for="journey-scale">스케일 단계</label>
          <input id="journey-scale" type="range" min="0" max="8" step="1" value="0" />
          <div id="journey-stage-name" class="journey-stage-name"></div>
          <p id="journey-stage-description" class="journey-stage-description"></p>
          <div class="stage-metrics">
            <div>
              <span>거리</span>
              <strong id="journey-distance"></strong>
            </div>
            <div>
              <span>빛의 시간</span>
              <strong id="journey-light-time"></strong>
            </div>
            <div>
              <span>규모 비유</span>
              <strong id="journey-scale-metaphor"></strong>
            </div>
          </div>
          <div id="journey-scale-bar" class="journey-scale-bar"></div>
        </article>

        <article class="journey-panel visual-panel">
          <canvas id="journey-canvas" width="860" height="460"></canvas>
        </article>

        <article class="journey-panel insight-panel">
          <h3>빛의 시간 체험</h3>
          <p id="journey-insight"></p>
          <h3>경이 포인트</h3>
          <ul id="journey-awe-list"></ul>
        </article>
      </section>
    </section>

    <script type="module" src="app.js"></script>
    <script type="module" src="sky3d.js"></script>
    <script type="module" src="cosmic-journey.js"></script>
  </body>
</html>
